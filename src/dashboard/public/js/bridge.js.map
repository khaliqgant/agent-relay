{
  "version": 3,
  "sources": ["../../frontend/bridge/state.ts", "../../frontend/utils.ts", "../../frontend/bridge/app.ts"],
  "sourcesContent": ["/**\n * Bridge State Management\n * Centralized state for the bridge dashboard\n */\n\nimport type { BridgeState, Project, BridgeMessage } from './types.js';\n\ntype StateListener = () => void;\n\n// Bridge state\nexport const state: BridgeState = {\n  projects: [],\n  messages: [],\n  selectedProjectId: null,\n  isConnected: false,\n  ws: null,\n  connectionStart: null,\n};\n\n// State subscribers\nconst listeners: StateListener[] = [];\n\n/**\n * Subscribe to state changes\n */\nexport function subscribe(listener: StateListener): () => void {\n  listeners.push(listener);\n  return () => {\n    const index = listeners.indexOf(listener);\n    if (index > -1) {\n      listeners.splice(index, 1);\n    }\n  };\n}\n\n/**\n * Notify all listeners of state change\n */\nfunction notifyListeners(): void {\n  listeners.forEach((listener) => {\n    try {\n      listener();\n    } catch (err) {\n      console.error('[bridge-state] Listener error:', err);\n    }\n  });\n}\n\n/**\n * Update projects\n */\nexport function setProjects(projects: Project[]): void {\n  state.projects = projects;\n  notifyListeners();\n}\n\n/**\n * Update messages\n */\nexport function setMessages(messages: BridgeMessage[]): void {\n  state.messages = messages;\n  notifyListeners();\n}\n\n/**\n * Set selected project\n */\nexport function setSelectedProject(projectId: string | null): void {\n  state.selectedProjectId = projectId;\n  notifyListeners();\n}\n\n/**\n * Update connection status\n */\nexport function setConnected(connected: boolean): void {\n  state.isConnected = connected;\n  if (connected && !state.connectionStart) {\n    state.connectionStart = Date.now();\n  }\n  notifyListeners();\n}\n\n/**\n * Set WebSocket instance\n */\nexport function setWebSocket(ws: WebSocket | null): void {\n  state.ws = ws;\n}\n\n/**\n * Get all agents across all projects\n */\nexport function getAllAgents(): { name: string; projectId: string; projectName: string; cli?: string }[] {\n  const agents: { name: string; projectId: string; projectName: string; cli?: string }[] = [];\n\n  state.projects.forEach((project) => {\n    (project.agents || []).forEach((agent) => {\n      agents.push({\n        name: agent.name,\n        projectId: project.id,\n        projectName: project.name || project.id,\n        cli: agent.cli,\n      });\n    });\n  });\n\n  return agents;\n}\n\n/**\n * Get connected projects\n */\nexport function getConnectedProjects(): Project[] {\n  return state.projects.filter((p) => p.connected);\n}\n\n/**\n * Get project by ID\n */\nexport function getProject(projectId: string): Project | undefined {\n  return state.projects.find((p) => p.id === projectId);\n}\n\n/**\n * Get uptime formatted string\n */\nexport function getUptimeString(): string {\n  if (!state.connectionStart) return '--';\n\n  const ms = Date.now() - state.connectionStart;\n  const seconds = Math.floor(ms / 1000);\n  if (seconds < 60) return `${seconds}s`;\n\n  const minutes = Math.floor(seconds / 60);\n  if (minutes < 60) return `${minutes}m`;\n\n  const hours = Math.floor(minutes / 60);\n  return `${hours}h ${minutes % 60}m`;\n}\n", "/**\n * Dashboard Utility Functions\n */\n\n/** Threshold for considering an agent offline (30 seconds) */\nexport const STALE_THRESHOLD_MS = 30000;\n\n/**\n * Check if an agent is online based on last seen timestamp\n */\nexport function isAgentOnline(lastSeen: string | undefined): boolean {\n  if (!lastSeen) return false;\n  const ts = Date.parse(lastSeen);\n  if (Number.isNaN(ts)) return false;\n  return Date.now() - ts < STALE_THRESHOLD_MS;\n}\n\n/**\n * Escape HTML to prevent XSS\n */\nexport function escapeHtml(text: string | undefined): string {\n  if (!text) return '';\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n/**\n * Format timestamp to locale time string\n */\nexport function formatTime(timestamp: string): string {\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n}\n\n/**\n * Format timestamp to human-readable date\n */\nexport function formatDate(timestamp: string): string {\n  const date = new Date(timestamp);\n  const today = new Date();\n  const yesterday = new Date(today);\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  if (date.toDateString() === today.toDateString()) {\n    return 'Today';\n  } else if (date.toDateString() === yesterday.toDateString()) {\n    return 'Yesterday';\n  } else {\n    return date.toLocaleDateString([], {\n      weekday: 'long',\n      month: 'long',\n      day: 'numeric',\n    });\n  }\n}\n\n/**\n * Generate a consistent color for an agent based on their name\n */\nexport function getAvatarColor(name: string): string {\n  const colors = [\n    '#e01e5a',\n    '#2bac76',\n    '#e8a427',\n    '#1264a3',\n    '#7c3aed',\n    '#0d9488',\n    '#dc2626',\n    '#9333ea',\n    '#ea580c',\n    '#0891b2',\n  ];\n  let hash = 0;\n  for (let i = 0; i < name.length; i++) {\n    hash = name.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  return colors[Math.abs(hash) % colors.length];\n}\n\n/**\n * Get initials from a name (first 2 characters, uppercase)\n */\nexport function getInitials(name: string): string {\n  return name.substring(0, 2).toUpperCase();\n}\n\n/**\n * Format message body with basic markdown-like formatting\n */\nexport function formatMessageBody(content: string | undefined): string {\n  if (!content) return '';\n\n  let escaped = escapeHtml(content);\n\n  // Simple code block detection\n  escaped = escaped.replace(/```([\\s\\S]*?)```/g, '<pre>$1</pre>');\n  escaped = escaped.replace(/`([^`]+)`/g, '<code>$1</code>');\n\n  // Convert newlines to <br> for proper multi-line display\n  escaped = escaped.replace(/\\n/g, '<br>');\n\n  return escaped;\n}\n", "/**\n * Bridge Dashboard Application Entry Point\n */\n\nimport { subscribe, state, setProjects, setMessages, setConnected, setWebSocket, setSelectedProject, getUptimeString, getConnectedProjects, getAllAgents, getProject } from './state.js';\nimport type { BridgeDOMElements, Project, BridgeMessage } from './types.js';\nimport { escapeHtml, formatTime, getAvatarColor, getInitials } from '../utils.js';\n\nlet elements: BridgeDOMElements;\n\n/**\n * Initialize DOM element references\n */\nfunction initElements(): BridgeDOMElements {\n  return {\n    statusDot: document.getElementById('status-dot')!,\n    projectList: document.getElementById('project-list')!,\n    cardsGrid: document.getElementById('cards-grid')!,\n    emptyState: document.getElementById('empty-state')!,\n    messagesList: document.getElementById('messages-list')!,\n    searchBar: document.getElementById('search-bar')!,\n    paletteOverlay: document.getElementById('command-palette-overlay')!,\n    paletteSearch: document.getElementById('palette-search') as HTMLInputElement,\n    paletteResults: document.getElementById('palette-results')!,\n    paletteProjectsSection: document.getElementById('palette-projects-section')!,\n    paletteAgentsSection: document.getElementById('palette-agents-section')!,\n    channelName: document.getElementById('channel-name')!,\n    statAgents: document.getElementById('stat-agents')!,\n    statMessages: document.getElementById('stat-messages')!,\n    composerProject: document.getElementById('composer-project') as HTMLSelectElement,\n    composerAgent: document.getElementById('composer-agent') as HTMLSelectElement,\n    composerMessage: document.getElementById('composer-message') as HTMLInputElement,\n    composerSend: document.getElementById('composer-send') as HTMLButtonElement,\n    composerStatus: document.getElementById('composer-status')!,\n    uptime: document.getElementById('uptime')!,\n  };\n}\n\n/**\n * Update connection status indicator\n */\nfunction updateConnectionStatus(): void {\n  elements.statusDot.classList.toggle('offline', !state.isConnected);\n}\n\n/**\n * Render sidebar projects list\n */\nfunction renderSidebarProjects(): void {\n  const { projects, selectedProjectId } = state;\n\n  if (!projects || projects.length === 0) {\n    elements.projectList.innerHTML = '<li class=\"project-item\" style=\"cursor: default; color: var(--text-muted);\">No projects</li>';\n    document.getElementById('project-count')!.textContent = '0';\n    return;\n  }\n\n  document.getElementById('project-count')!.textContent = String(projects.length);\n\n  elements.projectList.innerHTML = projects.map((p) => `\n    <li class=\"project-item ${p.connected ? 'connected' : ''} ${selectedProjectId === p.id ? 'active' : ''}\" data-project-id=\"${escapeHtml(p.id)}\">\n      <span class=\"project-status-dot\"></span>\n      <span class=\"project-name\">${escapeHtml(p.name || p.id)}</span>\n      <button class=\"project-dashboard-btn\" data-dashboard-project=\"${escapeHtml(p.id)}\" title=\"Open project dashboard\">\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>\n          <line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\"/>\n          <line x1=\"9\" y1=\"21\" x2=\"9\" y2=\"9\"/>\n        </svg>\n      </button>\n    </li>\n  `).join('');\n}\n\n/**\n * Render project cards grid\n */\nfunction renderProjectCards(): void {\n  const { projects, selectedProjectId } = state;\n\n  if (!projects || projects.length === 0) {\n    elements.cardsGrid.innerHTML = '';\n    elements.cardsGrid.appendChild(elements.emptyState);\n    elements.emptyState.style.display = 'flex';\n    return;\n  }\n\n  elements.emptyState.style.display = 'none';\n\n  elements.cardsGrid.innerHTML = projects.map((p) => {\n    const agents = p.agents || [];\n    const agentsHtml = agents.length > 0\n      ? agents.map((a) => `\n          <div class=\"agent-item\">\n            <span class=\"agent-status-dot\"></span>\n            <span class=\"agent-name\">${escapeHtml(a.name)}</span>\n            <span class=\"agent-cli\">${escapeHtml(a.cli || '')}</span>\n          </div>\n        `).join('')\n      : '<div class=\"no-agents\">No agents connected</div>';\n\n    const isSelected = selectedProjectId === p.id;\n    return `\n      <div class=\"project-card ${p.connected ? '' : 'offline'} ${isSelected ? 'selected' : ''}\" data-project-id=\"${escapeHtml(p.id)}\">\n        <div class=\"card-header\">\n          <div class=\"card-title-group\">\n            <div class=\"card-icon\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"/>\n              </svg>\n            </div>\n            <div>\n              <div class=\"card-title\">${escapeHtml(p.name || p.id)}</div>\n              <div class=\"card-path\">${escapeHtml(p.path || '')}</div>\n            </div>\n          </div>\n          <div class=\"card-status ${p.connected ? 'online' : p.reconnecting ? 'reconnecting' : 'offline'}\">\n            <span class=\"dot\"></span>\n            <span>${p.connected ? 'Online' : p.reconnecting ? 'Reconnecting...' : 'Offline'}</span>\n          </div>\n        </div>\n\n        <div class=\"agents-section\">\n          <div class=\"agents-header\">\n            <span class=\"agents-label\">Agents</span>\n            <span class=\"agents-count\">${agents.length} active</span>\n          </div>\n          <div class=\"agents-list\">\n            ${agentsHtml}\n          </div>\n        </div>\n\n        <div class=\"card-actions\">\n          <button class=\"card-action-btn\" data-message-lead=\"${escapeHtml(p.id)}\" ${!p.connected ? 'disabled' : ''}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"/>\n            </svg>\n            Message Lead\n          </button>\n          <button class=\"card-action-btn primary\" data-open-dashboard=\"${escapeHtml(p.id)}\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>\n              <line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\"/>\n              <line x1=\"9\" y1=\"21\" x2=\"9\" y2=\"9\"/>\n            </svg>\n            Open Dashboard\n          </button>\n        </div>\n      </div>\n    `;\n  }).join('');\n}\n\n/**\n * Render messages list\n */\nfunction renderMessages(): void {\n  const { messages } = state;\n\n  if (!messages || messages.length === 0) {\n    elements.messagesList.innerHTML = '<div class=\"messages-empty\"><p>No messages yet</p></div>';\n    return;\n  }\n\n  elements.messagesList.innerHTML = messages.slice(-50).reverse().map((m) => `\n    <div class=\"message-item\">\n      <div class=\"message-route\">\n        <span class=\"route-tag\">${escapeHtml(m.sourceProject || 'local')}</span>\n        <span class=\"route-agent\">${escapeHtml(m.from)}</span>\n        <span class=\"route-arrow\">\u2192</span>\n        <span class=\"route-agent\">${escapeHtml(m.to || '*')}</span>\n        <span class=\"route-time\">${formatTime(m.timestamp)}</span>\n      </div>\n      <div class=\"message-body\">${escapeHtml(m.body || m.content || '')}</div>\n    </div>\n  `).join('');\n}\n\n/**\n * Update stats display\n */\nfunction updateStats(): void {\n  const allAgents = getAllAgents();\n  elements.statAgents.textContent = String(allAgents.length);\n  elements.statMessages.textContent = String(state.messages.length);\n}\n\n/**\n * Update composer project options\n */\nfunction updateComposerProjects(): void {\n  const connectedProjects = getConnectedProjects();\n  const currentValue = elements.composerProject.value;\n\n  elements.composerProject.innerHTML = '<option value=\"\">Select a project...</option>' +\n    connectedProjects.map((p) =>\n      `<option value=\"${escapeHtml(p.id)}\">${escapeHtml(p.name || p.id)}</option>`\n    ).join('');\n\n  // Restore selection if still valid\n  if (currentValue && connectedProjects.some((p) => p.id === currentValue)) {\n    elements.composerProject.value = currentValue;\n  } else if (state.selectedProjectId && connectedProjects.some((p) => p.id === state.selectedProjectId)) {\n    elements.composerProject.value = state.selectedProjectId;\n    updateComposerAgents();\n  }\n}\n\n/**\n * Update composer agent options\n */\nfunction updateComposerAgents(): void {\n  const projectId = elements.composerProject.value;\n  if (!projectId) {\n    elements.composerAgent.innerHTML = '<option value=\"\">Select agent...</option>';\n    elements.composerAgent.disabled = true;\n    elements.composerMessage.disabled = true;\n    elements.composerSend.disabled = true;\n    return;\n  }\n\n  const currentAgent = elements.composerAgent.value;\n  const project = getProject(projectId);\n  const agents = project?.agents || [];\n\n  elements.composerAgent.innerHTML = '<option value=\"\">Select agent...</option>' +\n    '<option value=\"*\">* (Broadcast to all)</option>' +\n    '<option value=\"lead\">Lead</option>' +\n    agents.map((a) =>\n      `<option value=\"${escapeHtml(a.name)}\">${escapeHtml(a.name)}</option>`\n    ).join('');\n\n  elements.composerAgent.disabled = false;\n\n  // Restore agent selection if still valid\n  if (currentAgent) {\n    const validAgents = ['*', 'lead', ...agents.map((a) => a.name)];\n    if (validAgents.includes(currentAgent)) {\n      elements.composerAgent.value = currentAgent;\n    }\n  }\n}\n\n/**\n * Update composer state based on selections\n */\nfunction updateComposerState(): void {\n  const hasProject = !!elements.composerProject.value;\n  const hasAgent = !!elements.composerAgent.value;\n  const hasMessage = elements.composerMessage.value.trim().length > 0;\n\n  elements.composerMessage.disabled = !hasProject || !hasAgent;\n  elements.composerSend.disabled = !hasProject || !hasAgent || !hasMessage;\n}\n\n/**\n * Send message via bridge API\n */\nasync function sendBridgeMessage(): Promise<void> {\n  const projectId = elements.composerProject.value;\n  const to = elements.composerAgent.value;\n  const message = elements.composerMessage.value.trim();\n\n  if (!projectId || !to || !message) return;\n\n  elements.composerSend.disabled = true;\n  elements.composerStatus.textContent = 'Sending...';\n  elements.composerStatus.className = 'composer-status';\n\n  try {\n    const response = await fetch('/api/bridge/send', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ projectId, to, message }),\n    });\n\n    const result = await response.json();\n\n    if (response.ok && result.success) {\n      elements.composerStatus.textContent = 'Message sent!';\n      elements.composerStatus.className = 'composer-status success';\n      elements.composerMessage.value = '';\n      setTimeout(() => {\n        elements.composerStatus.textContent = '';\n        elements.composerStatus.className = 'composer-status';\n      }, 2000);\n    } else {\n      throw new Error(result.error || 'Failed to send');\n    }\n  } catch (err) {\n    elements.composerStatus.textContent = (err as Error).message || 'Failed to send message';\n    elements.composerStatus.className = 'composer-status error';\n  }\n\n  updateComposerState();\n}\n\n/**\n * Update header for project selection\n */\nfunction updateHeader(): void {\n  const { selectedProjectId } = state;\n\n  if (selectedProjectId) {\n    const project = getProject(selectedProjectId);\n    if (project) {\n      elements.channelName.innerHTML = `\n        <span class=\"back-link\" id=\"back-to-all\">\u2190 All Projects</span>\n        <span class=\"project-title\">${escapeHtml(project.name || project.id)}</span>\n      `;\n    }\n  } else {\n    elements.channelName.textContent = 'All Projects';\n  }\n}\n\n/**\n * Select a project\n */\nfunction selectProject(projectId: string | null): void {\n  setSelectedProject(projectId);\n\n  if (projectId) {\n    elements.composerProject.value = projectId;\n    updateComposerAgents();\n    updateComposerState();\n  }\n\n  // Update card selection visually\n  document.querySelectorAll('.project-card').forEach((card) => {\n    card.classList.toggle('selected', (card as HTMLElement).dataset.projectId === projectId);\n  });\n}\n\n/**\n * Open command palette\n */\nfunction openPalette(): void {\n  elements.paletteOverlay.classList.add('visible');\n  elements.paletteSearch.value = '';\n  elements.paletteSearch.focus();\n  updatePaletteResults();\n}\n\n/**\n * Close command palette\n */\nfunction closePalette(): void {\n  elements.paletteOverlay.classList.remove('visible');\n}\n\n/**\n * Update palette search results\n */\nfunction updatePaletteResults(): void {\n  const query = elements.paletteSearch.value.toLowerCase();\n  const { projects } = state;\n\n  // Update projects section\n  const filteredProjects = query\n    ? projects.filter((p) => (p.name || p.id).toLowerCase().includes(query))\n    : projects;\n\n  if (filteredProjects.length > 0) {\n    elements.paletteProjectsSection.innerHTML = `\n      <div class=\"palette-section-title\">Open Project Dashboard</div>\n      ${filteredProjects.map((p) => `\n        <div class=\"palette-item\" data-project=\"${escapeHtml(p.id)}\" data-action=\"open-dashboard\">\n          <div class=\"palette-item-icon\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>\n              <line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\"/>\n              <line x1=\"9\" y1=\"21\" x2=\"9\" y2=\"9\"/>\n            </svg>\n          </div>\n          <div class=\"palette-item-content\">\n            <div class=\"palette-item-title\">${escapeHtml(p.name || p.id)}</div>\n            <div class=\"palette-item-subtitle\">${p.connected ? 'Online' : 'Offline'} \u00B7 ${(p.agents || []).length} agents \u00B7 Click to open dashboard</div>\n          </div>\n          <div class=\"palette-item-shortcut\">\n            <kbd>\u23CE</kbd>\n          </div>\n        </div>\n      `).join('')}\n    `;\n  } else {\n    elements.paletteProjectsSection.innerHTML = '<div class=\"palette-section-title\">Open Project Dashboard</div>';\n  }\n\n  // Update agents section\n  const allAgents = getAllAgents();\n  const filteredAgents = query\n    ? allAgents.filter((a) => a.name.toLowerCase().includes(query))\n    : allAgents;\n\n  if (filteredAgents.length > 0) {\n    elements.paletteAgentsSection.innerHTML = `\n      <div class=\"palette-section-title\">Message Agent</div>\n      ${filteredAgents.map((a) => `\n        <div class=\"palette-item\" data-agent=\"${escapeHtml(a.name)}\" data-project=\"${escapeHtml(a.projectId)}\">\n          <div class=\"palette-item-icon\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"/>\n              <circle cx=\"12\" cy=\"7\" r=\"4\"/>\n            </svg>\n          </div>\n          <div class=\"palette-item-content\">\n            <div class=\"palette-item-title\">${escapeHtml(a.name)}</div>\n            <div class=\"palette-item-subtitle\">${escapeHtml(a.projectName)} \u00B7 ${escapeHtml(a.cli || 'unknown')}</div>\n          </div>\n        </div>\n      `).join('')}\n    `;\n  } else {\n    elements.paletteAgentsSection.innerHTML = '<div class=\"palette-section-title\">Message Agent</div>';\n  }\n}\n\n/**\n * Set up event listeners\n */\nfunction setupEventListeners(): void {\n  // Search bar opens palette\n  elements.searchBar.addEventListener('click', openPalette);\n\n  // Palette overlay click closes\n  elements.paletteOverlay.addEventListener('click', (e) => {\n    if (e.target === elements.paletteOverlay) closePalette();\n  });\n\n  // Palette search filtering\n  elements.paletteSearch.addEventListener('input', updatePaletteResults);\n\n  // Keyboard shortcuts\n  document.addEventListener('keydown', (e) => {\n    // Cmd/Ctrl + K to open palette\n    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n      e.preventDefault();\n      if (elements.paletteOverlay.classList.contains('visible')) {\n        closePalette();\n      } else {\n        openPalette();\n      }\n    }\n    // Escape to close\n    if (e.key === 'Escape' && elements.paletteOverlay.classList.contains('visible')) {\n      closePalette();\n    }\n  });\n\n  // Palette item clicks\n  elements.paletteResults.addEventListener('click', (e) => {\n    const item = (e.target as HTMLElement).closest('.palette-item') as HTMLElement | null;\n    if (!item) return;\n\n    const command = item.dataset.command;\n    const projectId = item.dataset.project;\n    const agentName = item.dataset.agent;\n    const action = item.dataset.action;\n\n    if (command === 'broadcast') {\n      closePalette();\n      elements.composerMessage.focus();\n      elements.composerStatus.textContent = 'Select a project and agent to send a message';\n    } else if (command === 'refresh') {\n      closePalette();\n      location.reload();\n    } else if (command === 'go-dashboard') {\n      closePalette();\n      window.location.href = '/';\n    } else if (action === 'open-dashboard' && projectId) {\n      closePalette();\n      window.location.href = `/project/${encodeURIComponent(projectId)}`;\n    } else if (agentName && projectId) {\n      closePalette();\n      elements.composerProject.value = projectId;\n      updateComposerAgents();\n      setTimeout(() => {\n        elements.composerAgent.value = agentName;\n        updateComposerState();\n        elements.composerMessage.focus();\n      }, 50);\n    } else if (projectId) {\n      closePalette();\n      selectProject(projectId);\n      const card = document.querySelector(`.project-card[data-project-id=\"${projectId}\"]`);\n      if (card) card.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  });\n\n  // Project card clicks\n  elements.cardsGrid.addEventListener('click', (e) => {\n    const target = e.target as HTMLElement;\n\n    // Handle \"Open Dashboard\" button\n    const dashboardBtn = target.closest('[data-open-dashboard]') as HTMLElement | null;\n    if (dashboardBtn) {\n      e.stopPropagation();\n      const projectId = dashboardBtn.dataset.openDashboard;\n      if (projectId) {\n        window.location.href = `/project/${encodeURIComponent(projectId)}`;\n      }\n      return;\n    }\n\n    // Handle \"Message Lead\" button\n    const messageLeadBtn = target.closest('[data-message-lead]') as HTMLButtonElement | null;\n    if (messageLeadBtn && !messageLeadBtn.disabled) {\n      e.stopPropagation();\n      const projectId = messageLeadBtn.dataset.messageLead;\n      if (projectId) {\n        elements.composerProject.value = projectId;\n        updateComposerAgents();\n        setTimeout(() => {\n          elements.composerAgent.value = 'lead';\n          updateComposerState();\n          elements.composerMessage.focus();\n        }, 50);\n      }\n      return;\n    }\n\n    const card = target.closest('.project-card') as HTMLElement | null;\n    if (card) {\n      selectProject(card.dataset.projectId || null);\n    }\n  });\n\n  // Sidebar project clicks\n  elements.projectList.addEventListener('click', (e) => {\n    const target = e.target as HTMLElement;\n\n    // Check if dashboard button was clicked\n    const dashboardBtn = target.closest('.project-dashboard-btn') as HTMLElement | null;\n    if (dashboardBtn) {\n      e.stopPropagation();\n      const projectId = dashboardBtn.dataset.dashboardProject;\n      if (projectId) {\n        window.location.href = `/project/${encodeURIComponent(projectId)}`;\n      }\n      return;\n    }\n\n    const item = target.closest('.project-item') as HTMLElement | null;\n    if (item) {\n      selectProject(item.dataset.projectId || null);\n    }\n  });\n\n  // Header back link\n  elements.channelName.addEventListener('click', (e) => {\n    const target = e.target as HTMLElement;\n    if (target.id === 'back-to-all' || target.classList.contains('back-link')) {\n      selectProject(null);\n    }\n  });\n\n  // Composer events\n  elements.composerProject.addEventListener('change', () => {\n    updateComposerAgents();\n    updateComposerState();\n  });\n\n  elements.composerAgent.addEventListener('change', updateComposerState);\n  elements.composerMessage.addEventListener('input', updateComposerState);\n\n  elements.composerSend.addEventListener('click', sendBridgeMessage);\n  elements.composerMessage.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey && !elements.composerSend.disabled) {\n      e.preventDefault();\n      sendBridgeMessage();\n    }\n  });\n}\n\n/**\n * Connect to WebSocket\n */\nfunction connect(): void {\n  const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n  const ws = new WebSocket(`${protocol}//${window.location.host}/ws/bridge`);\n\n  ws.onopen = () => {\n    setConnected(true);\n    setWebSocket(ws);\n  };\n\n  ws.onclose = () => {\n    setConnected(false);\n    setWebSocket(null);\n    setTimeout(connect, 3000);\n  };\n\n  ws.onerror = () => {\n    setConnected(false);\n  };\n\n  ws.onmessage = (e) => {\n    try {\n      const data = JSON.parse(e.data);\n      setProjects(data.projects || []);\n      setMessages(data.messages || []);\n    } catch (err) {\n      console.error('[bridge] Parse error:', err);\n    }\n  };\n}\n\n/**\n * Initialize the bridge application\n */\nexport function initBridgeApp(): void {\n  elements = initElements();\n\n  // Subscribe to state changes\n  subscribe(() => {\n    updateConnectionStatus();\n    renderSidebarProjects();\n    renderProjectCards();\n    renderMessages();\n    updateStats();\n    updateComposerProjects();\n    updateHeader();\n    if (elements.composerProject.value) {\n      updateComposerAgents();\n      updateComposerState();\n    }\n  });\n\n  // Set up event listeners\n  setupEventListeners();\n\n  // Connect to WebSocket\n  connect();\n\n  // Update uptime periodically\n  setInterval(() => {\n    elements.uptime.textContent = `Uptime: ${getUptimeString()}`;\n  }, 1000);\n}\n\n// Auto-initialize when DOM is ready\nif (typeof document !== 'undefined') {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initBridgeApp);\n  } else {\n    initBridgeApp();\n  }\n}\n"],
  "mappings": "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",
  "names": ["state", "listeners", "subscribe", "listener", "index", "notifyListeners", "err", "setProjects", "projects", "setMessages", "messages", "setSelectedProject", "projectId", "setConnected", "connected", "setWebSocket", "ws", "getAllAgents", "agents", "project", "agent", "getConnectedProjects", "p", "getProject", "getUptimeString", "ms", "seconds", "minutes", "escapeHtml", "text", "div", "formatTime", "timestamp", "elements", "initElements", "updateConnectionStatus", "state", "renderSidebarProjects", "projects", "selectedProjectId", "p", "escapeHtml", "renderProjectCards", "agents", "agentsHtml", "a", "isSelected", "renderMessages", "messages", "m", "formatTime", "updateStats", "allAgents", "getAllAgents", "updateComposerProjects", "connectedProjects", "getConnectedProjects", "currentValue", "updateComposerAgents", "projectId", "currentAgent", "getProject", "updateComposerState", "hasProject", "hasAgent", "hasMessage", "sendBridgeMessage", "to", "message", "response", "result", "err", "updateHeader", "project", "selectProject", "setSelectedProject", "card", "openPalette", "updatePaletteResults", "closePalette", "query", "filteredProjects", "filteredAgents", "setupEventListeners", "item", "command", "agentName", "action", "target", "dashboardBtn", "messageLeadBtn", "connect", "protocol", "ws", "setConnected", "setWebSocket", "e", "data", "setProjects", "setMessages", "initBridgeApp", "subscribe", "getUptimeString"]
}
